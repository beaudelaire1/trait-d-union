<nav id="navbar" class="px-6 py-4 border-b border-stroke-dark/50 backdrop-blur-xl bg-tus-black/70 fixed top-0 left-0 right-0 z-50 transition-all duration-500" style="view-transition-name: navbar;">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
        <!-- Logo SVG -->
        <a href="/" class="group link-animated" id="navbar-logo">
            <svg height="36" viewBox="0 0 520 120" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Trait d'Union Studio">
                <defs>
                    <linearGradient id="tusGradNav" x1="0" y1="0" x2="260" y2="0" gradientUnits="userSpaceOnUse">
                        <stop offset="0" stop-color="#0B2DFF"/>
                        <stop offset="0.62" stop-color="#2D5BFF"/>
                        <stop offset="1" stop-color="#F6F7FB"/>
                    </linearGradient>
                </defs>
                <text x="0" y="54" font-family="Space Grotesk, Arial, sans-serif" font-size="44" font-weight="700" letter-spacing="1.1" fill="#F6F7FB" class="group-hover:fill-tus-blue transition-colors">TRAIT D'UNION</text>
                <rect x="0" y="69" width="240" height="6" rx="3" fill="url(#tusGradNav)" class="origin-left group-hover:scale-x-110 transition-transform"/>
                <text x="0" y="106" font-family="Space Grotesk, Arial, sans-serif" font-size="22" font-weight="600" letter-spacing="4" fill="rgba(246,247,251,0.82)">STUDIO</text>
            </svg>
        </a>
        
        <!-- Navigation Desktop -->
        <ul class="hidden md:flex items-center gap-8 text-sm font-medium">
            <li>
                <a href="/services/" class="link-animated relative py-2 text-tus-white/80 hover:text-tus-white transition-colors">
                    Services
                </a>
            </li>
            <li>
                <a href="/portfolio/" class="link-animated relative py-2 text-tus-white/80 hover:text-tus-white transition-colors">
                    Portfolio
                </a>
            </li>
            <li>
                <a href="/method/" class="link-animated relative py-2 text-tus-white/80 hover:text-tus-white transition-colors">
                    Méthode
                </a>
            </li>
            <li>
                <a href="{% url 'clients:dashboard' %}" class="link-animated relative py-2 text-tus-white/80 hover:text-tus-white transition-colors flex items-center gap-1.5">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                    Espace Client
                </a>
            </li>
            {% if user.is_authenticated %}
            <li>
                <a href="{% url 'account_logout' %}" class="link-animated relative py-2 text-red-400/80 hover:text-red-400 transition-colors flex items-center gap-1.5">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                    </svg>
                    Déconnexion
                </a>
            </li>
            {% endif %}
            <li>
                <a href="/contact/" class="btn-primary btn-magnetic bg-tus-blue px-5 py-2.5 rounded-full font-semibold">
                    Contact
                </a>
            </li>
        </ul>
        
        <!-- Mobile menu button -->
        <button class="md:hidden text-tus-white p-2 relative z-[70]" aria-label="Menu" id="mobile-menu-btn" aria-expanded="false">
            <!-- Icône hamburger -->
            <svg id="menu-icon-open" class="w-6 h-6 transition-all duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
            <!-- Icône fermer (cachée par défaut) -->
            <svg id="menu-icon-close" class="w-6 h-6 absolute inset-0 m-auto opacity-0 scale-0 transition-all duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
        </button>
    </div>
    
    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed top-[72px] left-0 right-0 bottom-0 z-[60] md:hidden transform translate-x-full transition-transform duration-300 ease-out backdrop-blur-xl bg-tus-black/70">
        <div class="flex flex-col items-center pt-12 gap-6 text-center px-6">
            <a href="/services/" class="text-2xl font-display font-semibold text-tus-white hover:text-tus-blue transition-colors">
                Services
            </a>
            <a href="/portfolio/" class="text-2xl font-display font-semibold text-tus-white hover:text-tus-blue transition-colors">
                Portfolio
            </a>
            <a href="/method/" class="text-2xl font-display font-semibold text-tus-white hover:text-tus-blue transition-colors">
                Méthode
            </a>
            <a href="{% url 'clients:dashboard' %}" class="text-2xl font-display font-semibold text-tus-white hover:text-tus-blue transition-colors flex items-center gap-2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
                Espace Client
            </a>
            {% if user.is_authenticated %}
            <a href="{% url 'account_logout' %}" class="text-xl font-display font-semibold text-red-400 hover:text-red-300 transition-colors flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
                Déconnexion
            </a>
            {% endif %}
            <a href="/contact/" class="mt-6 bg-tus-blue px-8 py-4 rounded-full text-xl font-semibold text-white hover:bg-tus-blue/80 transition-colors">
                Contact
            </a>
        </div>
    </div>
</nav>

<!-- Mobile Menu Toggle Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const menuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const iconOpen = document.getElementById('menu-icon-open');
    const iconClose = document.getElementById('menu-icon-close');
    const navbarLogo = document.getElementById('navbar-logo');
    let isOpen = false;
    
    if (menuBtn && mobileMenu) {
        menuBtn.addEventListener('click', function() {
            isOpen = !isOpen;
            
            if (isOpen) {
                // Ouvrir le menu
                mobileMenu.classList.remove('translate-x-full');
                mobileMenu.classList.add('translate-x-0');
                iconOpen.classList.add('opacity-0', 'scale-0');
                iconClose.classList.remove('opacity-0', 'scale-0');
                menuBtn.setAttribute('aria-expanded', 'true');
                document.body.style.overflow = 'hidden';
                // Cacher le logo
                if (navbarLogo) navbarLogo.style.opacity = '0';
            } else {
                // Fermer le menu
                mobileMenu.classList.add('translate-x-full');
                mobileMenu.classList.remove('translate-x-0');
                iconOpen.classList.remove('opacity-0', 'scale-0');
                iconClose.classList.add('opacity-0', 'scale-0');
                menuBtn.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
                // Afficher le logo
                if (navbarLogo) navbarLogo.style.opacity = '1';
            }
        });
        
        // Fermer le menu quand on clique sur un lien
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', function() {
                isOpen = false;
                mobileMenu.classList.add('translate-x-full');
                mobileMenu.classList.remove('translate-x-0');
                iconOpen.classList.remove('opacity-0', 'scale-0');
                iconClose.classList.add('opacity-0', 'scale-0');
                menuBtn.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
                if (navbarLogo) navbarLogo.style.opacity = '1';
            });
        });
    }
});
</script>
