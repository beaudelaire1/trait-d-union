{% extends 'base.html' %}

{% block title %}Mes devis - Espace Client{% endblock %}

{% block content %}
<div class="client-portal">
    <header class="client-header">
        <div class="container">
            <nav class="client-breadcrumb">
                <a href="{% url 'clients:dashboard' %}">Espace client</a>
                <span>/</span>
                <span>Mes devis</span>
            </nav>
            <h1>Mes devis</h1>
        </div>
    </header>

    <section class="client-main">
        <div class="container">
            {% if quotes %}
                <div class="quotes-list">
                    {% for quote in quotes %}
                    <a href="{% url 'devis:quote_detail' quote.pk %}" class="quote-row">
                        <div class="quote-main">
                            <span class="quote-ref">{{ quote.reference }}</span>
                            <span class="quote-title">{{ quote.title|default:"Devis" }}</span>
                        </div>
                        <div class="quote-amount">
                            {{ quote.total_ttc|floatformat:2 }}â‚¬ <span class="ht">TTC</span>
                        </div>
                        <div class="quote-date">
                            {{ quote.created_at|date:"d/m/Y" }}
                        </div>
                        <div class="quote-status">
                            <span class="status-badge status-{{ quote.status }}">
                                {{ quote.get_status_display }}
                            </span>
                        </div>
                        <span class="quote-arrow">â†’</span>
                    </a>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-state-large">
                    <span class="empty-icon">ðŸ“‹</span>
                    <h2>Aucun devis</h2>
                    <p>Vous n'avez pas encore de devis. Contactez-nous pour dÃ©marrer votre projet !</p>
                    <a href="{% url 'leads:quote_request' %}" class="btn btn-primary">Demander un devis</a>
                </div>
            {% endif %}
        </div>
    </section>
</div>

<style>
.quotes-list {
    background: white;
    border-radius: 1rem;
    overflow: hidden;
}

.quote-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr auto;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    text-decoration: none;
    color: inherit;
    border-bottom: 1px solid var(--gray-100);
    transition: background 0.2s;
}

.quote-row:hover {
    background: var(--gray-50);
}

.quote-row:last-child {
    border-bottom: none;
}

.quote-ref {
    font-weight: 600;
    display: block;
    margin-bottom: 0.125rem;
}

.quote-title {
    font-size: 0.875rem;
    color: var(--gray-500);
}

.quote-amount {
    font-weight: 700;
    font-size: 1.125rem;
}

.quote-amount .ht {
    font-size: 0.75rem;
    font-weight: 400;
    color: var(--gray-500);
}

.quote-date {
    color: var(--gray-500);
    font-size: 0.875rem;
}

.status-badge {
    display: inline-block;
    padding: 0.375rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.75rem;
    font-weight: 500;
}

.status-draft { background: var(--gray-100); color: var(--gray-600); }
.status-sent { background: #dbeafe; color: #1e40af; }
.status-accepted { background: #dcfce7; color: #166534; }
.status-rejected { background: #fee2e2; color: #991b1b; }
.status-expired { background: #fef3c7; color: #92400e; }

.quote-arrow {
    color: var(--primary);
    font-size: 1.25rem;
    transition: transform 0.2s;
}

.quote-row:hover .quote-arrow {
    transform: translateX(4px);
}

.empty-state-large {
    text-align: center;
    padding: 5rem 2rem;
    background: white;
    border-radius: 1rem;
}

.empty-icon {
    font-size: 4rem;
    display: block;
    margin-bottom: 1rem;
}

@media (max-width: 768px) {
    .quote-row {
        grid-template-columns: 1fr;
        gap: 0.5rem;
    }
    
    .quote-main {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .quote-amount, .quote-date {
        display: inline;
    }
}
</style>
{% endblock %}
